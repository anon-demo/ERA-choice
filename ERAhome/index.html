<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experimental Realism AI (ERA)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --navbar-bg: #111212;
            --navbar-hover: #08ffe6;
            --navbar-light: #e0e0e0;
            --main-bg: #18191b;
            --primary: #fff;
            --secondary: #d1d5db;
            --accent: #08ffe6;
            --form-bg: #222326;
        }
        html, body {
            height: 100%;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--primary);
            background: var(--main-bg);
            min-height: 100vh;
        }
        .navbar {
            width: 100%;
            padding: 0 0.5rem;
            height: 70px;
            background: var(--navbar-bg);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 18px rgba(8,255,230,0.03);
            position: sticky;
            top: 0;
            z-index: 1050;
        }
        .navbar-left {
            display: flex;
            align-items: center;
        }
        .logo-placeholder {
            width: 40px;
            height: 40px;
            background: var(--navbar-hover);
            border-radius: 10px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.95rem;
            font-weight: 800;
            color: #151515;
            letter-spacing: -2px;
        }
        .navbar-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--primary);
            margin-right: 38px;
            letter-spacing: -1px;
            white-space: nowrap;
        }
        .navbar-center {
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }
        .navbar-link, .navbar-dropdown > a {
            color: var(--navbar-light);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            padding: 10px 11px;
            border-radius: 7px;
            transition: color 0.18s, background 0.15s;
            cursor: pointer;
            position: relative;
            border: none;
            background: none;
            outline: none;
        }
        .navbar-link:hover, .navbar-dropdown > a:hover, .navbar-dropdown .dropdown-content a:hover {
            color: var(--navbar-hover);
            background: rgba(8,255,230,0.07);
        }
        .navbar-dropdown {
            position: relative;
        }
        .navbar-dropdown .dropdown-content {
            display: none;
            position: absolute;
            left: 0;
            top: 100%;
            min-width: 230px;
            background: #232323;
            border-radius: 8px;
            margin-top: 4px;
            box-shadow: 0 6px 32px rgba(8,255,230,0.13);
            padding: 0.5rem 0;
            z-index: 1200;
        }
        .navbar-dropdown:hover .dropdown-content, .navbar-dropdown:focus-within .dropdown-content {
            display: block;
        }
        .dropdown-category {
            padding: 0.5rem 1rem;
            font-weight: 700;
            color: var(--accent);
            font-size: 1.01rem;
            margin-top: 3px;
            margin-bottom: 4px;
        }
        .dropdown-content a {
            display: block;
            padding: 8px 27px;
            color: var(--navbar-light);
            font-size: 0.85rem;
            text-decoration: none;
            border-radius: 6px;
            transition: color 0.17s, background 0.14s;
        }
        .navbar-link.active, .navbar-link.active:hover {
            color: var(--accent);
            background: rgba(8,255,230,0.12);
        }
        .navbar-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .navbar-action {
            color: var(--accent);
            background: none;
            border: 1.5px solid var(--accent);
            padding: 7px 19px;
            border-radius: 7px;
            font-size: 1rem;
            font-weight: 600;
            margin-left: 10px;
            cursor: pointer;
            transition: background 0.19s, color 0.19s;
            text-decoration: none;
        }
        .navbar-action:hover {
            background: var(--accent);
            color: #111212;
        }
        .navbar-login {
            color: var(--primary);
            background: none;
            border: 1.3px solid var(--primary);
            padding: 7px 19px;
            border-radius: 7px;
            font-size: 1rem;
            font-weight: 600;
            margin-left: 10px;
            cursor: pointer;
            transition: background 0.19s, color 0.19s, border 0.12s;
            text-decoration: none;
        }
        .navbar-login:hover {
            background: var(--primary);
            color: var(--navbar-bg);
            border: 1.3px solid var(--accent);
        }
        @media (max-width: 1100px) {
            .navbar-center {
                gap: 0.3rem;
            }
            .navbar-title {
                font-size: 1.15rem;
            }
        }
        @media (max-width: 900px) {
            .navbar {
                flex-direction: column;
                align-items: stretch;
                height: auto;
                padding-bottom: 8px;
            }
            .navbar-left, .navbar-center, .navbar-right {
                flex-direction: row;
                justify-content: flex-start;
                margin-bottom: 3px;
            }
            .navbar-center {
                flex-wrap: wrap;
                gap: 0.7rem;
            }
        }
        @media (max-width: 700px) {
            .navbar {
                flex-direction: column;
                align-items: stretch;
                height: auto;
                padding-bottom: 8px;
            }
            .navbar-center {
                flex-wrap: wrap;
                gap: 0.3rem;
            }
            .navbar-title {
                font-size: 1.02rem;
            }
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: var(--primary);
        }
        .header h1 {
            font-size: 3.2rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 7px rgba(8,255,230,0.08);
            letter-spacing: -2px;
        }
        .header .subtitle {
            font-size: 2rem;
            margin-bottom: 3rem;
            font-weight: 400;
            color: var(--secondary);
        }
        .cta-intro {
            color: var(--secondary);
            font-size: 1.09rem;
            margin-bottom: 2rem;
            opacity: 0.87;
            transition: color 0.17s;
        }
        .cta-intro:hover {
            color: var(--accent);
        }
        .cta-section {
            text-align: center;
            margin: 4rem 0;
        }
        .cta-button {
            background: linear-gradient(90deg, var(--accent) 0%, #43e97b 100%);
            color: #18191b;
            padding: 1.5rem 3rem;
            font-size: 1.5rem;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.23s ease;
            box-shadow: 0 8px 25px rgba(8,255,230,0.11);
            text-decoration: none;
            display: inline-block;
        }
        .cta-button:hover {
            background: linear-gradient(90deg, #43e97b 0%, var(--accent) 100%);
            color: #151515;
            transform: translateY(-2px) scale(1.03);
            box-shadow: 0 12px 35px rgba(8,255,230,0.18);
        }
        .cta-description {
            margin-top: 1rem;
            color: var(--secondary);
            opacity: 0.8;
            font-size: 0.96rem;
            transition: color 0.17s;
        }
        .cta-description:hover {
            color: var(--accent);
        }
        .examples-section {
            background: #212324;
            border-radius: 20px;
            padding: 3rem;
            margin: 4rem 0;
            box-shadow: 0 10px 40px rgba(8,255,230,0.06);
        }
        .examples-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--primary);
        }
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        .example-card {
            background: #232426;
            border-radius: 12px;
            padding: 0;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            overflow: hidden;
        }
        .example-card:hover {
            border-color: var(--accent);
            box-shadow: 0 8px 35px rgba(8,255,230,0.11);
        }
        .example-preview {
            width: 100%;
            height: 200px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            display: block;
        }
        .example-preview::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%);
        }
        .example-content {
            padding: 1.5rem;
            position: relative;
        }
        .example-card h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        .example-card p {
            color: var(--secondary);
            font-size: 0.9rem;
        }
        .how-it-works {
            background: #232324;
            border-radius: 20px;
            padding: 3rem;
            margin: 4rem 0;
            color: var(--primary);
        }
        .how-it-works h2 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--primary);
        }
        .steps {
            counter-reset: step-counter;
        }
        .step {
            counter-increment: step-counter;
            margin-bottom: 1.5rem;
            padding-left: 3rem;
            position: relative;
            color: var(--secondary);
            transition: color 0.19s;
        }
        .step:hover {
            color: var(--primary);
        }
        .step::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: var(--accent);
            color: #232324;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(10,10,10,0.68);
            backdrop-filter: blur(6px);
        }
        .modal-content {
            background-color: var(--form-bg);
            margin: 2% auto;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            color: var(--primary);
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 1rem;
            top: 1rem;
        }
        .close:hover {
            color: var(--accent);
        }
        .form-group {
            margin-bottom: 2rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary);
        }
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #383838;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            background: #191a1b;
            color: var(--primary);
        }
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
        }
        .form-group textarea {
            height: 100px;
            resize: vertical;
        }
        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .radio-item, .checkbox-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .conditional-field {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            background: #26282c;
            border-radius: 8px;
        }
        .submit-btn {
            background: linear-gradient(45deg, var(--accent), #43e97b);
            color: #232324;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.23s;
            width: 100%;
        }
        .submit-btn:hover {
            background: linear-gradient(45deg, #43e97b, var(--accent));
            color: #18191b;
            box-shadow: 0 8px 20px rgba(8,255,230,0.13);
        }
        .prompt-result {
            display: none;
            background: #212324;
            padding: 2rem;
            border-radius: 12px;
            margin-top: 2rem;
            border-left: 4px solid var(--accent);
            color: var(--primary);
        }
        .prompt-result h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }
        .prompt-text {
            background: #18191b;
            padding: 1rem;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
            border: 1px solid #242627;
            max-height: 300px;
            overflow-y: auto;
        }
        .copy-btn {
            background: #08ffe6;
            color: #19191a;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .stepper {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 2rem;
        }
        .step-dot {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #333;
            margin: 0 8px;
            transition: background 0.3s;
        }
        .step-dot.active {
            background: var(--accent);
        }
        @media (max-width: 768px) {
            .header h1 { font-size: 2.5rem; }
            .container { padding: 1rem; }
            .modal-content { margin: 5% auto; padding: 1.5rem; }
            .navbar-center, .navbar-right { gap: 0.3rem; }
        }
		
		/* Flow diagram styling */
		.flow-diagram {
		  position: relative;
		  width: 100vw;
		  max-width: 100%;
		  overflow-x: hidden;
		  margin-bottom: 1.5rem;
		}

		.diagram-img {
		  width: 100vw;
		  height: auto;
		  display: block;
		}

		.zoom-icon {
		  position: absolute;
		  bottom: 10px;
		  right: 15px;
		  font-size: 1.5rem;
		  cursor: pointer;
		  background: rgba(255, 255, 255, 0.8);
		  padding: 4px 6px;
		  border-radius: 6px;
		}

		/* Modal for zoom */
		.modal {
		  display: none;
		  position: fixed;
		  z-index: 1000;
		  padding-top: 5vh;
		  left: 0;
		  top: 0;
		  width: 100%;
		  height: 100%;
		  overflow: auto;
		  background-color: rgba(0,0,0,0.9);
		}

		.modal-content {
		  margin: auto;
		  display: block;
		  max-width: 90%;
		  max-height: 85vh;
		}

		.close {
		  position: absolute;
		  top: 20px;
		  right: 35px;
		  color: #fff;
		  font-size: 2rem;
		  font-weight: bold;
		  cursor: pointer;
		}

		.code-block {
		  position: relative;
		  background: #f9f9f9;
		  color: #A9A9A9;
		  border: 1px solid #ccc;
		  border-radius: 6px;
		  padding: 8px;
		  margin-top: 8px;
		  max-height: 3em; /* ~2 lines visible */
		  overflow-y: auto; /* scroll if more */
		  font-family: monospace;
		  font-size: 13px;
		}

		.code-block code {
		  color: #333; /* dark gray, easy to read on white */
		}

		.copy-btn {
		  position: absolute;
		  top: 6px;
		  right: 6px;
		  background-color: #007bff; /* blue button */
		  color: white;
		  border: none;
		  border-radius: 4px;
		  padding: 2px 8px;
		  font-size: 12px;
		  cursor: pointer;
		}

		.copy-btn:hover {
		  background-color: #0056b3;
		}

    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-left">
            <div class="logo-placeholder">E R A</div>
            <span class="navbar-title">Experimental Realism AI</span>
        </div>
        <div class="navbar-center">
            <div class="navbar-dropdown">
                <a class="navbar-link" href="#examples">Examples</a>

            </div>
            <a class="navbar-link" href="https://era-t9ro.onrender.com/">Create</a>
            <a class="navbar-link" href="#how-it-works">How To</a>
            <div class="navbar-dropdown">
                <a class="navbar-link" href="#how-it-works">Integrations</a>
            </div>
        </div>
    </nav>
    <div class="container">
        <header class="header">
            <h1>Experimental Realism AI (ERA)</h1>
            <p class="subtitle">Make your consumer behavior experiments look and feel just like the actual website.</p>
        </header>
		<div class="cta-section">
		  <p class="cta-intro">
			Start with a screenshot of any online retail webpage. Then, click 'Begin Here'
			and we will help you design it and integrate with Qualtrics.
		  </p>

		  <a href="https://era-t9ro.onrender.com/" class="cta-button">Begin Here</a>

		  <p class="cta-description">
			Click 'Begin Here' to create your realistic consumer choice screen
		  </p>
		</div>

        <section class="examples-section" id="examples">
            <h2 class="examples-title">Examples: Realistic Consumer Choice Experiments</h2>
            <div class="examples-grid">
                <div class="example-card" onclick="window.open('https://anon-demo.github.io/ERA-choice/Netflix')">
                    <img class="example-preview" src="netflix2025_screenshot.png" alt="Netflix Example Preview">
                    <div class="example-content">
                        <h3>Netflix</h3>
                        <p>Subscription choice with realistic Netflix interface</p>
                    </div>
                </div>
                <div class="example-card" onclick="window.open('https://anon-demo.github.io/ERA-choice/Amazon-USBchoice')">
                    <img class="example-preview" src="AmazonUSBimage.png" alt="AmazonUSB Example Preview">
                    <div class="example-content">
                        <h3>Amazon product choice</h3>
                        <p>Consumer choice between USB drives with realistic Amazon interface</p>
                    </div>
                </div>
                <div class="example-card" onclick="window.open('https://anon-demo.github.io/ERA-choice/CapitalOne')">
                    <img class="example-preview" src="CapitalOne.png" alt="CapitalOne Example Preview">
                    <div class="example-content">
                        <h3>Credit Card Payment Choice</h3>
                        <p>Consumer credit card payment choice (mimicking CapitalOne) with realistic interface.</p>
                    </div>
                </div>
                <div class="example-card" onclick="window.open('https://anon-demo.github.io/ERA-choice/Peacock')">
                    <img class="example-preview" src="Peacock.png" alt="Peacock Example Preview">
                    <div class="example-content">
                        <h3>Peacock Subscription Choice</h3>
                        <p>Choice between several Peacock subscription options with realistic interface.</p>
                    </div>
                </div>
                <div class="example-card" onclick="window.open('https://anon-demo.github.io/ERA-choice/HelloFresh')">
                    <img class="example-preview" src="HelloFresh.png" alt="HelloFresh Example Preview">
                    <div class="example-content">
                        <h3>HelloFresh Subscription Choice</h3>
                        <p>Choice between HelloFresh options (food preferences, frequency, etc) with a realistic interface mirroring their website.</p>
                    </div>
                </div>
                <div class="example-card" onclick="window.open('https://vlab.decisionsciences.columbia.edu/anon-demo/mlwebexamples/dropbox_2025.html')">
                    <img class="example-preview" src="dropbox2025_screenshot.png" alt="Dropbox Example Preview">
                    <div class="example-content">
                        <h3>Dropbox</h3>
                        <p>Consumer choice between Dropbox subscriptions with an authentic Dropbox design</p>
                    </div>
                </div>
                <div class="example-card" onclick="window.open('https://iphone-rosy-eight.vercel.app', '_blank')">
                    <img class="example-preview" src="apple2025_screenshot.png" alt="Apple Example Preview">
                    <div class="example-content">
                        <h3>Apple</h3>
                        <p>Realistic Apple page (which iPhone is best for you), with edits to permit mouselabWEB-like process tracking.</p>
                    </div>
                </div>	
                <div class="example-card" onclick="window.open('https://vlab.decisionsciences.columbia.edu/anon-demo/netflix_mlweb.html')">
                    <img class="example-preview" src="netflix2025_screenshot.png" alt="Netflix Process Tracing Preview">
                    <div class="example-content">
                        <h3>Netflix Process Tracing</h3>
                        <p>Realistic process tracing example, similar to a modern MouselabWEB (2.0). Uses the Netflix plan selection page.</p>
                    </div>
                </div>			
                <div class="example-card" onclick="window.open('https://vlab.decisionsciences.columbia.edu/anon-demo/ERAexamples/amazon2025.html', '_blank')">
                    <img class="example-preview" src="amazon2025_screenshot.png" alt="Amazon Example Preview">
                    <div class="example-content">
                        <h3>Amazon Cancellation</h3>
                        <p>Amazon Prime subscription cancellation screen, after EU forced them to re-design it</p>
                    </div>
                </div>
                <!-- NEW: Share Your Example card -->
				<div class="example-card" style="cursor:pointer;" onclick="document.getElementById('shareExampleModal').style.display='block'">
					<div class="example-preview" style="background: #232426; display: flex; align-items: center; justify-content: center; position:relative; flex-direction: column;">
						<svg width="64" height="64" fill="none" stroke="#08ffe6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 64 64">
							<rect x="12" y="12" width="40" height="40" rx="8" stroke="#08ffe6" stroke-width="2.5" fill="none"/>
							<path d="M32 22v20M22 32h20" stroke="#08ffe6"/>
						</svg>
						<span style="color:#08ffe6;font-size:1.02rem;margin-top:10px;font-weight:600;">Upload your design here</span>
					</div>
					<div class="example-content">
						<h3>Share Your Example</h3>
						<p>Have an example for other researchers? Click here to share it &amp; help expand our tool's reach across topics and contexts.</p>
					</div>
				</div>
            </div>
        </section>
		<section class="how-it-works" id="how-it-works">
		  <h2>How it works:</h2>


            <div class="steps">
                <div class="step">Decide which webpage/consumer choice you want to mimic. Take a screenshot of it. Click "Begin Here" and Upload your screenshot to the ERA webpage. </div>
                <div class="step">Specify requirements & customizations. Provide (a) the Qualtrics URL you want to redirect to (and which buttons should indicate their final choice and redirect) and (b) any changes you would like AI to make to your screenshot when making your experiment webpage. The Qualtrics survey need not be finished.</div>
                <div class="step">Review & access generated code. Download the resulting .html and open in a web browser. This will more or less show how that choice page would look. </div>
                <div class="step">Iterate & refine. If you want to make changes, click Make Changes on the ERA webpage (above the .html code) and scroll down to the bottom to find the chat and ask the AI to make changes. Repeat this process until you're happy with the resulting look & functionality. If your original screenshot had product images or photos, AI will likely replace those with placeholders. If so, grab a screenshot of those product image(s)/photos and replace the "placeholder" part of your code with those images. </div>
                <div class="step">Integrate with Qualtrics: The 3 steps for this are shown below in the diagram. To do the first part (Step 5), add 3 embedded data variables in Qualtrics survey flow, just like you would with Respondent ID or PROLIFIC_ID on Prolific, Cloudresearch, or other platforms to record those in your dataset. The embedded variables need to be called "decisionTime" "finalChoice" and "allClicks". </div>
				<div class="step">
				  Qualtrics integration 2 (step 6 in diagram). On the question where you want to display the ERA choice, add the following JS by clicking on the question, clicking "Javascript" on the left under "Question Behavior", deleting everything currently in there and pasting the code shown below: (which will make this question redirect to your ERA webpage)

				  <div class="code-block">
					<button class="copy-btn" onclick="copyCode('code1')">Copy</button>
					<pre><code id="code1">Qualtrics.SurveyEngine.addOnload(function() { 
					// Redirect to your ERA webpage
					window.location.href = "https://your-era-url-here.com";
				});

				Qualtrics.SurveyEngine.addOnReady(function() { 

				});

				Qualtrics.SurveyEngine.addOnUnload(function() { 

				});</code></pre>
				  </div>
				</div>

				<div class="step">
				  Qualtrics integration 3 (step 7 in diagram): On the next question of your Qualtrics survey, add this custom JS by clicking on the question, clicking "Javascript", deleting everything currently in there and pasting the code shown below:

				  <div class="code-block">
					<button class="copy-btn" onclick="copyCode('code2')">Copy</button>
					<pre><code id="code2">Qualtrics.SurveyEngine.addOnload(function() { 
					// Grab URL params
					const urlParams = new URLSearchParams(window.location.search);

					// If "allClicks" exists in the URL (any value, or even no value), auto-advance
					if (urlParams.has('allClicks')) {
						this.clickNextButton();
					}
				});

				Qualtrics.SurveyEngine.addOnReady(function() { 

				});

				Qualtrics.SurveyEngine.addOnUnload(function() { 

				});</code></pre>
				  </div>
				</div>
                <div class="step">Put your .html file on a server. Popular free & easy examples include Netlify and GitHub Pages. Ask ChatGPT/AI how to put your webpage on one of these servers and it will be very simple.</div>
            </div>
		  <!-- Flow diagram with zoom icon -->
		  <div class="flow-diagram">
			<img src="steps_ERA_integration.png" alt="Flow diagram" class="diagram-img">
			<span class="zoom-icon" onclick="openModal()">üîç</span>
		  </div>

		  <!-- Modal for zoomed image -->
		  <div id="imgModal" class="modal" onclick="closeModal()">
			<span class="close">&times;</span>
			<img class="modal-content" id="modalImage">
		  </div>
        </section>
    </div>
    <!-- Modal for Share Your Example -->
    <div id="shareExampleModal" class="modal" style="z-index:1201;">
        <div class="modal-content" style="max-width:400px;">
            <span class="close" onclick="document.getElementById('shareExampleModal').style.display='none'">&times;</span>
            <h2 style="margin-bottom:1.5rem;">Share Your Example</h2>
            <form id="shareExampleForm">
                <div class="form-group">
                    <label for="exampleUpload">Upload webpage file (or folder if multiple files):</label>
                    <input type="file" id="exampleUpload" name="exampleUpload" accept=".jpg,.jpeg,.png,.pdf,.docx,.zip">
                </div>
                <div class="form-group">
                    <label for="yourEmail">Your Email (optional):</label>
                    <input type="email" id="yourEmail" name="yourEmail" placeholder="name@email.com">
                </div>
                <div class="form-group">
                    <label for="exampleDesc">Description (optional):</label>
                    <textarea id="exampleDesc" name="exampleDesc" placeholder="Describe your example and why it may help other researchers..."></textarea>
                </div>
                <button type="submit" class="submit-btn">Submit Example</button>
            </form>
        </div>
    </div>
    <!-- Main Modal -->
    <div id="formModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="stepper">
                <div class="step-dot" id="dot-1"></div>
                <div class="step-dot" id="dot-2"></div>
            </div>
            <!-- Step 1: Screenshot upload or description -->
            <div id="modal-step-1">
                <h2>Step 1: Upload a Screenshot or Describe the Webpage You Want</h2>
                <form id="uploadForm" onsubmit="return false;">
                    <div class="form-group">
                        <label for="screenshot">Upload a screenshot of the webpage you want to mimic (recommended):</label>
                        <input type="file" id="screenshot" name="screenshot" accept=".png,.jpg,.jpeg,.webp,.gif" class="file-input">
                    </div>
                    <div style="margin: 16px 0;text-align:center;color:#666;">‚Äî OR ‚Äî</div>
                    <div class="form-group">
                        <label for="description">If you don't have a screenshot, describe in detail the webpage you want to mimic, including all choice options (less recommended):</label>
                        <textarea id="description" name="description" placeholder="Describe your desired webpage here..."></textarea>
                    </div>
                    <button type="button" class="submit-btn" onclick="goToStep2()">Next</button>
                </form>
            </div>
            <!-- Step 2: The rest of the form -->
            <div id="modal-step-2" style="display:none;">
                <h2>Create Your Realistic Consumer Choice Screen</h2>
                <form id="eraForm">
                    <div class="form-group">
                        <label for="email">Your Email Address:</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label>When should the webpage redirect back to Qualtrics?</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="redirect1" name="redirect" value="clicks on any option that indicates their choice" required>
                                <label for="redirect1">When the user clicks on any option that indicates their choice</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="redirect2" name="redirect" value="clicks the ___ button (e.g., continue, add to cart, etc)" required>
                                <label for="redirect2">When the user clicks the ___ button (e.g., continue, add to cart, etc)</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="redirect3" name="redirect" value="custom action" required>
                                <label for="redirect3">When the user</label>
                                <input type="text" id="customRedirect" placeholder="describe custom action here" style="margin-left: 0.5rem; flex: 1;">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Which of the following data points do you want to record? (These will be added to your Qualtrics data if you follow the steps for embedded data)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="choice" name="dataPoints" value="choice">
                                <label for="choice">Choice</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="allClicks" name="dataPoints" value="allClicks">
                                <label for="allClicks">AllClicks (record everything the user clicks on)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="decisionTime" name="dataPoints" value="decisionTime">
                                <label for="decisionTime">DecisionTime (record the amount of time spent on this choice screen prior to finalizing the decision)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="maxScroll" name="dataPoints" value="maxScroll">
                                <label for="maxScroll">MaxScroll</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="modifications">Describe anything you want to look different on your webpage than in your screenshot:</label>
                        <textarea id="modifications" name="modifications" placeholder="Describe any changes you'd like to make..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Does your experiment require 2+ versions of this webpage? (i.e. multiple conditions that will show the same webpage but with 1 change or experimental manipulation)</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="multipleVersionsYes" name="multipleVersions" value="Yes" onchange="toggleVersionDescription()">
                                <label for="multipleVersionsYes">Yes</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="multipleVersionsNo" name="multipleVersions" value="No" onchange="toggleVersionDescription()">
                                <label for="multipleVersionsNo">No</label>
                            </div>
                        </div>
                        <div id="versionDescription" class="conditional-field">
                            <label for="versionDifference">Describe the difference between the 2 versions:</label>
                            <textarea id="versionDifference" name="versionDifference" placeholder="Describe the differences between versions..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="qualtricsUrl">What is the URL for your Qualtrics survey?</label>
                        <input type="text" id="qualtricsUrl" name="qualtricsUrl" placeholder="https://your-qualtrics-survey-url.com" required>
                    </div>
                    <button type="submit" class="submit-btn">Generate Webpage</button>
                </form>
                <div id="webpageResult" class="prompt-result">
                    <h3>Your Generated Webpage Code:</h3>
                    <div id="promptText" class="prompt-text"></div>
                    <h3 style="margin-top:2rem;">Next Steps to Use in Qualtrics:</h3>
                    <ol id="integrationSteps" style="margin-left:1.2rem;">
                        <li><strong>Host the HTML file</strong> ‚Äî Save the code above as <code>index.html</code> and upload it to your hosting (GitHub Pages, Vercel, or your lab server).</li>
                        <li><strong>Link from Qualtrics</strong> ‚Äî In your survey flow, use a Descriptive Text or redirect to the hosted page for the stimulus screen.</li>
                        <li><strong>Pass Embedded Data</strong> ‚Äî Add Embedded Data fields (e.g., <code>choice</code>, <code>decisionTime</code>) and ensure the page appends them to the Qualtrics redirect URL.</li>
                        <li><strong>Test end-to-end</strong> ‚Äî Pilot the survey to verify the page loads, captures interactions, and returns the data back to Qualtrics correctly.</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <script>
        function openModal() {
            document.getElementById('formModal').style.display = 'block';
            document.getElementById('modal-step-1').style.display = 'block';
            document.getElementById('modal-step-2').style.display = 'none';
            setStepper(1);
        }
        function closeModal() {
            document.getElementById('formModal').style.display = 'none';
        }
        function setStepper(step) {
            document.getElementById('dot-1').classList.toggle('active', step === 1);
            document.getElementById('dot-2').classList.toggle('active', step === 2);
        }
        function goToStep2() {
            document.getElementById('modal-step-1').style.display = 'none';
            document.getElementById('modal-step-2').style.display = 'block';
            setStepper(2);
        }
        function toggleVersionDescription() {
            const yesSelected = document.getElementById('multipleVersionsYes').checked;
            const descriptionField = document.getElementById('versionDescription');
            descriptionField.style.display = yesSelected ? 'block' : 'none';
        }
		
		function copyCode(id) {
		  const code = document.getElementById(id).innerText;
		  navigator.clipboard.writeText(code).then(() => {
			alert("Code copied to clipboard!");
		  });
		}	
				
		function openModal() {
		  const modal = document.getElementById("imgModal");
		  const modalImg = document.getElementById("modalImage");
		  modal.style.display = "block";
		  modalImg.src = document.querySelector(".diagram-img").src;
		}

		function closeModal() {
		  document.getElementById("imgModal").style.display = "none";
		}

        // UPDATED: use fixed prompt; require screenshot; show generated HTML + steps
        document.getElementById('eraForm').onsubmit = async function(event) {
            event.preventDefault();

            // Require a screenshot from Step 1
            const screenshotInput = document.getElementById('screenshot');
            const screenshotFile = screenshotInput && screenshotInput.files.length > 0 ? screenshotInput.files[0] : null;
            if (!screenshotFile) {
                alert('Please upload a screenshot in Step 1.');
                return;
            }

            // Fixed prompt per current design plan
            const fixedPrompt = "Please make a .html webpage that recreates the UI shown in the attached screenshot as accurately as possible.";

            const formData = new FormData();
            formData.append('screenshot', screenshotFile);
            formData.append('prompt', fixedPrompt);

            // Show loading state and result container
            const codeOut = document.getElementById('promptText');
            codeOut.textContent = 'Generating webpage... please wait.';
            document.getElementById('webpageResult').style.display = 'block';

            try {
                const response = await fetch('/api/generate-webpage', {
                    method: 'POST',
                    body: formData,
                });
                if (response.ok) {
                    const data = await response.json();
                    codeOut.textContent = data.generatedCode || 'No code returned.';
                } else {
                    codeOut.textContent = 'Error generating webpage. Please try again later.';
                }
            } catch (err) {
                codeOut.textContent = 'Server error. Please try again later.';
            }
        };

        window.onclick = function(event) {
            const modal = document.getElementById('formModal');
            const shareModal = document.getElementById('shareExampleModal');
            if (event.target === modal) closeModal();
            if (event.target === shareModal) shareModal.style.display = 'none';
        };

        // Share Example form POST logic
        document.getElementById('shareExampleForm').onsubmit = async function(e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            const response = await fetch('/api/share-example', {
                method: 'POST',
                body: formData,
            });
            if (response.ok) {
                alert('Thank you for sharing your example! We will review it soon.');
                document.getElementById('shareExampleModal').style.display = 'none';
                form.reset();
            } else {
                alert('There was an error submitting your example. Please try again later.');
            }
        };
    </script>
</body>
</html>
